<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  
    <title>v1.1.0 Migration Guide - Hyperledger FireFly Docs</title>

    
  

  <link rel="shortcut icon" href="/firefly/head/favicon.ico" type="image/x-icon">

  <link rel="stylesheet" href="/firefly/head/assets/css/just-the-docs-default.css">

  

  
    <script type="text/javascript" src="/firefly/head/assets/js/vendor/lunr.min.js"></script>
  
  <script type="text/javascript" src="/firefly/head/assets/js/just-the-docs.js"></script>

  <script type="text/javascript" src="/firefly/assets/js/versions.js" data-proofer-ignore></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>v1.1.0 Migration Guide | Hyperledger FireFly Docs</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="v1.1.0 Migration Guide" />
<meta property="og:locale" content="en" />
<meta name="description" content="Hyperledger FireFly is the first open source Supernode: a complete stack for enterprises to build and scale secure Web3 applications. The FireFly API for digital assets, data flows, and blockchain transactions makes it radically faster to build production-ready apps on popular chains and protocols." />
<meta property="og:description" content="Hyperledger FireFly is the first open source Supernode: a complete stack for enterprises to build and scale secure Web3 applications. The FireFly API for digital assets, data flows, and blockchain transactions makes it radically faster to build production-ready apps on popular chains and protocols." />
<meta property="og:site_name" content="Hyperledger FireFly Docs" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="v1.1.0 Migration Guide" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Hyperledger FireFly is the first open source Supernode: a complete stack for enterprises to build and scale secure Web3 applications. The FireFly API for digital assets, data flows, and blockchain transactions makes it radically faster to build production-ready apps on popular chains and protocols.","headline":"v1.1.0 Migration Guide","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/firefly/head/images/hyperledger-firefly_color.svg"}},"url":"/firefly/head/releasenotes/1.1_migration_guide.html"}</script>
<!-- End Jekyll SEO tag -->


  

</head>

<body>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="svg-link" viewBox="0 0 24 24">
      <title>Link</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
      </svg>
    </symbol>
    <symbol id="svg-search" viewBox="0 0 24 24">
      <title>Search</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
        <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
    </symbol>
    <symbol id="svg-menu" viewBox="0 0 24 24">
      <title>Menu</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
        <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </symbol>
    <symbol id="svg-arrow-right" viewBox="0 0 24 24">
      <title>Expand</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
        <polyline points="9 18 15 12 9 6"></polyline>
      </svg>
    </symbol>
    <symbol id="svg-doc" viewBox="0 0 24 24">
      <title>Document</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
        <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
      </svg>
    </symbol>
  </svg>

  <div class="side-bar">
    <div class="site-header">
      <a href="/firefly/head/" class="site-title lh-tight">
  <div class="site-logo"></div>

</a>
      <a href="#" id="menu-button" class="site-button">
        <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
      </a>
    </div>
    <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
      
        <ul class="nav-list"><li class="nav-list-item"><a href="/firefly/head/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/overview/" class="nav-list-link">Understanding FireFly</a><ul class="nav-list "><li class="nav-list-item "><a href="/firefly/head/overview/supernode_concept.html" class="nav-list-link">Introduction</a></li><li class="nav-list-item "><a href="/firefly/head/overview/usage_patterns.html" class="nav-list-link">Usage Patterns</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/overview/key_features.html" class="nav-list-link">Key Features</a><ul class="nav-list"><li class="nav-list-item ">
                    <a href="/firefly/head/overview/key_components/apps.html" class="nav-list-link">Apps</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/overview/key_components/digital_assets.html" class="nav-list-link">Digital Assets</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/overview/key_components/connectors.html" class="nav-list-link">Connector Framework</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/overview/key_components/orchestration_engine.html" class="nav-list-link">Orchestration Engine</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/overview/key_components/flows.html" class="nav-list-link">Flows</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/overview/key_components/security.html" class="nav-list-link">Security</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/overview/key_components/tools.html" class="nav-list-link">Tools</a>
                  </li></ul></li><li class="nav-list-item "><a href="/firefly/head/overview/gateway_features.html" class="nav-list-link">Web3 Gateway Features</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/overview/multiparty_features.html" class="nav-list-link">Multiparty Features</a><ul class="nav-list"><li class="nav-list-item ">
                    <a href="/firefly/head/overview/multiparty/multiparty_flow.html" class="nav-list-link">Multiparty Process Flow</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/overview/multiparty/data_exchange.html" class="nav-list-link">Private Data Exchange</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/overview/multiparty/broadcast.html" class="nav-list-link">Broadcast data</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/overview/multiparty/deterministic.html" class="nav-list-link">Deterministic Compute</a>
                  </li></ul></li><li class="nav-list-item "><a href="/firefly/head/overview/public_vs_permissioned.html" class="nav-list-link">Public and Permissioned</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/gettingstarted/" class="nav-list-link">Getting Started</a><ul class="nav-list "><li class="nav-list-item "><a href="/firefly/head/gettingstarted/firefly_cli.html" class="nav-list-link">① Install the FireFly CLI</a></li><li class="nav-list-item "><a href="/firefly/head/gettingstarted/setup_env.html" class="nav-list-link">② Start your environment</a></li><li class="nav-list-item "><a href="/firefly/head/gettingstarted/sandbox.html" class="nav-list-link">③ Use the Sandbox</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/tutorials/" class="nav-list-link">Tutorials</a><ul class="nav-list "><li class="nav-list-item "><a href="/firefly/head/tutorials/broadcast_data.html" class="nav-list-link">Broadcast data</a></li><li class="nav-list-item "><a href="/firefly/head/tutorials/private_send.html" class="nav-list-link">Privately send data</a></li><li class="nav-list-item "><a href="/firefly/head/tutorials/define_datatype.html" class="nav-list-link">Define a datatype</a></li><li class="nav-list-item "><a href="/firefly/head/tutorials/events.html" class="nav-list-link">Listen for events</a></li><li class="nav-list-item "><a href="/firefly/head/tutorials/query_messages.html" class="nav-list-link">Explore messages</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/tutorials/tokens/" class="nav-list-link">Use tokens</a><ul class="nav-list"><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/tokens/erc20.html" class="nav-list-link">ERC-20</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/tokens/erc721.html" class="nav-list-link">ERC-721</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/tokens/erc1155.html" class="nav-list-link">ERC-1155</a>
                  </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/tutorials/custom_contracts/" class="nav-list-link">Work with custom smart contracts</a><ul class="nav-list"><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/custom_contracts/ethereum.html" class="nav-list-link">Ethereum</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/custom_contracts/fabric.html" class="nav-list-link">Fabric</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/custom_contracts/pinning.html" class="nav-list-link">Pinning Data</a>
                  </li></ul></li><li class="nav-list-item "><a href="/firefly/head/tutorials/create_custom_identity.html" class="nav-list-link">Create a custom identity</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/tutorials/chains/" class="nav-list-link">Connect to remote blockchains</a><ul class="nav-list"><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/chains/polygon_testnet.html" class="nav-list-link">Polygon Testnet</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/chains/binance_smart_chain.html" class="nav-list-link">Binance Smartchain Testnet</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/chains/avalanche.html" class="nav-list-link">Avalanche Testnet</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/chains/arbitrum.html" class="nav-list-link">Arbitrum Testnet</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/chains/optimism.html" class="nav-list-link">Optimism Testnet</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/chains/fabric_test_network.html" class="nav-list-link">Fabric-Samples Test Network</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/chains/moonbeam.html" class="nav-list-link">Moonbeam Testnet</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/chains/zksync_testnet.html" class="nav-list-link">zkSync Testnet</a>
                  </li></ul></li><li class="nav-list-item "><a href="/firefly/head/tutorials/basic_auth.html" class="nav-list-link">Enable basic auth</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/reference/" class="nav-list-link">Reference</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/reference/types/" class="nav-list-link">Core Resources</a><ul class="nav-list"><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/simpletypes.html" class="nav-list-link">Simple Types</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/event.html" class="nav-list-link">Event</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/subscription.html" class="nav-list-link">Subscription</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/contractapi.html" class="nav-list-link">ContractAPI</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/blockchainevent.html" class="nav-list-link">BlockchainEvent</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/transaction.html" class="nav-list-link">Transaction</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/operation.html" class="nav-list-link">Operation</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/operationwithdetail.html" class="nav-list-link">OperationWithDetail</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/ffi.html" class="nav-list-link">FFI</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/contractlistener.html" class="nav-list-link">ContractListener</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/tokenpool.html" class="nav-list-link">TokenPool</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/tokentransfer.html" class="nav-list-link">TokenTransfer</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/tokenapproval.html" class="nav-list-link">TokenApproval</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/identity.html" class="nav-list-link">Identity</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/verifier.html" class="nav-list-link">Verifier</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/message.html" class="nav-list-link">Message</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/data.html" class="nav-list-link">Data</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/datatype.html" class="nav-list-link">Datatype</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/group.html" class="nav-list-link">Group</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/nextpin.html" class="nav-list-link">NextPin</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/batch.html" class="nav-list-link">Batch</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/namespace.html" class="nav-list-link">Namespace</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/wsstart.html" class="nav-list-link">WSStart</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/wsack.html" class="nav-list-link">WSAck</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/wserror.html" class="nav-list-link">WSError</a>
                  </li></ul></li><li class="nav-list-item "><a href="/firefly/head/reference/config.html" class="nav-list-link">Configuration Reference</a></li><li class="nav-list-item "><a href="/firefly/head/reference/api_query_syntax.html" class="nav-list-link">API Query Syntax</a></li><li class="nav-list-item "><a href="/firefly/head/reference/api_post_syntax.html" class="nav-list-link">API Post Syntax</a></li><li class="nav-list-item "><a href="/firefly/head/reference/blockchain_operation_status.html" class="nav-list-link">Blockchain Operation Status</a></li><li class="nav-list-item "><a href="/firefly/head/reference/events.html" class="nav-list-link">Event Bus</a></li><li class="nav-list-item "><a href="/firefly/head/reference/identities.html" class="nav-list-link">Identities</a></li><li class="nav-list-item "><a href="/firefly/head/reference/firefly_interface_format.html" class="nav-list-link">FireFly Interface Format</a></li><li class="nav-list-item "><a href="/firefly/head/reference/namespaces.html" class="nav-list-link">Namespaces</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/reference/microservices/" class="nav-list-link">Microservices</a><ul class="nav-list"><li class="nav-list-item ">
                    <a href="/firefly/head/reference/microservices/fftokens.html" class="nav-list-link">fftokens</a>
                  </li></ul></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/architecture/" class="nav-list-link">Architecture</a><ul class="nav-list "><li class="nav-list-item "><a href="/firefly/head/architecture/node_component_architecture.html" class="nav-list-link">Node Component Architecture</a></li><li class="nav-list-item "><a href="/firefly/head/architecture/blockchain_connector_framework.html" class="nav-list-link">Blockchain Connector Toolkit</a></li><li class="nav-list-item "><a href="/firefly/head/architecture/multiparty_event_sequencing.html" class="nav-list-link">Multiparty Event Sequencing</a></li><li class="nav-list-item "><a href="/firefly/head/architecture/plugin_architecture.html" class="nav-list-link">Plugin Architecture</a></li><li class="nav-list-item "><a href="/firefly/head/architecture/ping_pong_txflow.html" class="nav-list-link">Example Transaction Flow</a></li><li class="nav-list-item "><a href="/firefly/head/architecture/internal_event_sequencing.html" class="nav-list-link">Internal Event Sequencing</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/contributors/" class="nav-list-link">Contributors</a><ul class="nav-list "><li class="nav-list-item "><a href="/firefly/head/contributors/code_overview.html" class="nav-list-link">FireFly Code Overview</a></li><li class="nav-list-item "><a href="/firefly/head/contributors/code_hierarchy.html" class="nav-list-link">FireFly Code Hierarchy</a></li><li class="nav-list-item "><a href="/firefly/head/contributors/code_repositories.html" class="nav-list-link">Code Repositories</a></li><li class="nav-list-item "><a href="/firefly/head/contributors/dev_environment_setup.html" class="nav-list-link">Setting up a FireFly Core Development Environment</a></li><li class="nav-list-item "><a href="/firefly/head/contributors/advanced_cli_usage.html" class="nav-list-link">Advanced CLI Usage</a></li><li class="nav-list-item "><a href="/firefly/head/contributors/docs_setup.html" class="nav-list-link">Contributing to Documentation</a></li><li class="nav-list-item "><a href="/firefly/head/contributors/version_scheme.html" class="nav-list-link">Versioning Scheme</a></li><li class="nav-list-item "><a href="/firefly/head/contributors/release_guide.html" class="nav-list-link">Release Guide</a></li></ul></li><li class="nav-list-item"><a href="/firefly/head/swagger/swagger.html" class="nav-list-link">API Spec</a></li><li class="nav-list-item"><a href="/firefly/head/faqs/" class="nav-list-link">FAQs</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/releasenotes/" class="nav-list-link">Release Notes</a><ul class="nav-list "><li class="nav-list-item "><a href="/firefly/head/releasenotes/1.2_migration_guide.html" class="nav-list-link">v1.2.0 Migration Guide</a></li><li class="nav-list-item  active"><a href="/firefly/head/releasenotes/1.1_migration_guide.html" class="nav-list-link active">v1.1.0 Migration Guide</a></li></ul></li></ul>

      
    </nav>
    <footer class="site-footer">
      This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.
    </footer>
  </div>
  <div class="main" id="top">
    <div id="main-header" class="main-header">
      
        <div class="search">
          <div class="search-input-wrap">
            <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Hyperledger FireFly Docs" aria-label="Search Hyperledger FireFly Docs" autocomplete="off">
            <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
          </div>
          <div id="search-results" class="search-results"></div>
        </div>
      
      
      
        <nav aria-label="Auxiliary" class="aux-nav">
          <ul class="aux-nav-list">
            
              <li class="aux-nav-list-item">
                <a href="https://github.com/hyperledger/firefly" class="site-button"
                  
                >
                  GitHub
                </a>
              </li>
            
              <li class="aux-nav-list-item">
                <a href="https://wiki.hyperledger.org/display/FIR" class="site-button"
                  
                >
                  Wiki
                </a>
              </li>
            
              <li class="aux-nav-list-item">
                <a href="https://discord.gg/hyperledger" class="site-button"
                  
                >
                  Discord
                </a>
              </li>
            
            <li class="aux-nav-list-item">
              <span class="dropdown">
                <a class="site-button">English
                </a>
                <div class="dropdown-content"></div>
              </span>
            </li>
            <li class="aux-nav-list-item">
              <span class="dropdown">
                <a class="site-button">
                  Version: head
                </a>
                <div class="dropdown-content" id="versionDropdown">
                </div>
              </span>
            </li>
          </ul>
        </nav>
      
    </div>
    <div id="main-content-wrap" class="main-content-wrap">
      
        <nav aria-label="Breadcrumb" class="breadcrumb-nav">
            <ol class="breadcrumb-nav-list">
              
              
              
                <li class="breadcrumb-nav-list-item"><a href="/firefly/head/releasenotes/">Release Notes</a></li>
              
              <li class="breadcrumb-nav-list-item"><span>v1.1.0 Migration Guide</span></li>
            </ol>
          </nav>
        
      
      <div id="main-content" class="main-content" role="main">
        
          <h1 class="no_toc" id="v110-migration-guide">
        
        
          <a href="#v110-migration-guide" class="anchor-heading" aria-labelledby="v110-migration-guide"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> v1.1.0 Migration Guide
        
        
      </h1>
    
      <h2 class="no_toc text-delta" id="table-of-contents">
        
        
          <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents
        
        
      </h2>
    

<ol id="markdown-toc">
  <li><a href="#overview" id="markdown-toc-overview">Overview</a></li>
  <li><a href="#before-upgrading" id="markdown-toc-before-upgrading">Before Upgrading</a>    <ol>
      <li><a href="#common-steps" id="markdown-toc-common-steps">Common Steps</a></li>
      <li><a href="#less-common-situations" id="markdown-toc-less-common-situations">Less Common Situations</a></li>
    </ol>
  </li>
  <li><a href="#performing-the-upgrade" id="markdown-toc-performing-the-upgrade">Performing the Upgrade</a></li>
  <li><a href="#after-upgrading" id="markdown-toc-after-upgrading">After Upgrading</a></li>
  <li><a href="#upgrading-the-multi-party-contract" id="markdown-toc-upgrading-the-multi-party-contract">Upgrading the Multi-Party Contract</a></li>
</ol><hr />
      <h2 id="overview">
        
        
          <a href="#overview" class="anchor-heading" aria-labelledby="overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview
        
        
      </h2>
    

<p>Hyperledger FireFly v1.1.0 is a feature release that includes significant new functionality around namespaces and plugins, as detailed in <a href="https://github.com/hyperledger/firefly-fir/pull/12">FIR-12</a>. As a result, upgrading an existing FireFly environment from any prior release may require special steps (depending on the functionality used).</p>

<p>If seamless data preservation is not required, you can simply create a new network from scratch using FireFly v1.1.0.</p>

<p>If you want to preserve data from an existing 1.0.x network, significant care has been taken to ensure that it is possible. Most existing environments can be upgraded with minimal extra steps. This document attempts to call out all potentially breaking changes (both common and uncommon), so that you can easily assess the impact of the upgrade and any needed preparation before proceeding.</p>
      <h2 id="before-upgrading">
        
        
          <a href="#before-upgrading" class="anchor-heading" aria-labelledby="before-upgrading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Before Upgrading
        
        
      </h2>
    

<p>These steps are all safe to do while running FireFly v1.0.x. While they do not <em>have</em> to be done prior to upgrading, performing them ahead of time may allow you to preemptively fix some problems and ease the migration to v1.1.0.</p>
      <h3 id="common-steps">
        
        
          <a href="#common-steps" class="anchor-heading" aria-labelledby="common-steps"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Common Steps
        
        
      </h3>
    

<p><strong>Upgrade to latest v1.0.x patch release</strong></p>

<p>Before upgrading to v1.1.0, it is <em>strongly</em> recommended to upgrade to the latest v1.0.x patch release (v1.0.4 as of the writing this document). Do not proceed any further in this guide until all nodes are successfully running the latest patch release version.</p>

<p><strong>Fix any deprecated config usage</strong></p>

<p>All items in FireFly’s YAML config that were <em>deprecated</em> at any time in the v1.0.x line will be <em>unsupported</em> in v1.1.0. After upgrading to the latest v1.0.x patch release, you should therefore look for any deprecation warnings when starting FireFly, and ensure they are fixed before upgrading to v1.1.0. Failure to do so will cause your config file to be rejected in v1.1.0, and FireFly will fail to start.</p>

<p>You can utilize the <a href="https://github.com/hyperledger/firefly/tree/main/ffconfig">ffconfig</a> tool to automatically check and fix deprecated config with a command such as:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ffconfig migrate -f &lt;input-file&gt; -o &lt;output-file&gt; --to 1.0.4
</code></pre></div></div>

<p>This should ensure your config file is acceptable to 1.0.x <em>or</em> 1.1.x.</p>

<p>Note that if you are attempting to migrate a Dockerized development environment (such as one stood up by the firefly-cli), you may need to edit the config file <em>inside</em> the Docker. Environments created by a v1.0.x CLI do not expose the config file outside the Docker container.</p>
      <h3 id="less-common-situations">
        
        
          <a href="#less-common-situations" class="anchor-heading" aria-labelledby="less-common-situations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Less Common Situations
        
        
      </h3>
    

<p><strong>Record all broadcast namespaces in the config file</strong></p>

<details>
<summary>Expand for migration details only if your application uses non-default namespaces.</summary>

FireFly v1.0 allowed for the dynamic creation of new namespaces by broadcasting a namespace definition to all nodes. This functionality is _removed_ in v1.1.0. If your network relies on any namespaces that were created via a broadcast, you must add those namespaces to the `namespaces.predefined` list in your YAML config prior to upgrade. If you do not, they will cease to function after upgrading to v1.1.0 (all events on those namespaces will be ignored by your node).

</details>

<p><strong>Identify queries for organization/node identities</strong></p>

<details>
<summary>Expand for migration details only if your application queries <code>/network/organizations</code> or <code>/network/nodes</code>.</summary>

Applications that query `/network/organizations` or `/network/nodes` will temporarily receive _empty result lists_ after upgrading to v1.1.0, just until all identities have been re-registered (see steps in "After Upgrading"). This is because organization and node identities were broadcast on a global "ff_system" namespace in v1.0, but are no longer global in v1.1.0.

The simplest solution is to shut down applications until the FireFly upgrade is complete on all nodes and all identities have been re-broadcast.

If this poses a problem and you require zero downtime from these APIs, you can proactively mitigate with the following steps in your application code:

- Applications that query the `/network/organizations` may be altered to _also_ query `/namespaces/ff_system/network/organizations` and combine the results (but should disregard the second query if it fails).
- Applications that query the `/network/nodes` may be altered to _also_ query `/namespaces/ff_system/network/nodes` and combine the results (but should disregard the second query if it fails).

Further details on the changes to `/network` APIs are provided in the next section.

</details>

<p><strong>Identify usage of changed APIs</strong></p>

<details>
<summary>Expand for migration details on all changes to <code>/namespaces</code>, <code>/status</code>, and <code>/network</code> APIs.</summary>

The primary API change in this version is that the "global" paths beginning with `/network` and `/status` have been relocated under the `/namespaces/{ns}` prefix, as this data is now specific to a namespace instead of being global. At the same time, the API server has been enhanced so that omitting a namespace from an API path will _query the default namespace_ instead. That is, querying `/messages` is now the same as querying `/namespaces/default/messages` (assuming your default namespace is named "default"). This has the effect that most of the moved APIs will continue to function without requiring changes. See below for details on the affected paths.

These global routes have been moved under `/namespaces/{ns}`. Continuing to use them without the namespace prefix **will still work**, and will simply query the default namespace.

```
/network/diddocs/{did}
/network/nodes
/network/nodes/{nameOrId}
/network/nodes/self
/network/organizations
/network/organizations/{nameOrId}
/network/organizations/self
/status
/status/batchmanager
```

These global routes have been moved under `/namespaces/{ns}` and have also been deprecated in favor of a new route name. Continuing to use them without the namespace prefix **will still work**, and will simply query the default namespace. However, it is recommended to switch to the new API spelling when possible.

```
/network/identities - replaced by existing /namespaces/{ns}/identities
/network/identities/{did} - replaced by new /namespaces/{ns}/identities/{did}
```

These global routes have been have been permanently renamed. They are deemed less likely to be used by client applications, but any usage **will be broken** by this release and must be changed after upgrading.

```
/status/pins - moved to /namespaces/{ns}/pins (or /pins to query the default namespace)
/status/websockets - moved to /websockets
```

The response bodies of the following APIs have also had fields removed. Any usage of the removed fields **will be broken** by this release and must be changed after upgrading.

```
/namespaces - removed all fields except "name", "description", "created"
/namespaces/{ns} - same as above
/namespaces/{ns}/status - removed "defaults"
```

</details>

<p><strong>Adjust or remove usage of admin APIs</strong></p>

<details>
<summary>Expand for migration details on all changes to <code>/admin</code> and <code>/spi</code>.</summary>

FireFly provides an administrative API in addition to the normal API. In v1.1.0, this has been renamed to
SPI (Service Provider Interface). Consequently, all of the routes have moved from `/admin` to `/spi`, and
the config section has been renamed from `admin` to `spi`. There is no automatic migration provided, so
any usage of the old routes will need to be changed, and your config file will need to be adjusted if you
wish to keep the SPI enabled (although it is perfectly fine to have both `admin` and `spi` sections if
needed for migration).

The ability to set FireFly config via these routes has also been removed. Any usage of the `/admin/config`
routes must be discontinued, and config should be set exclusively by editing the FireFly config file.
The only route retained from this functionality was `/admin/config/reset`, which has been renamed to
`/spi/reset` - this will continue to be available for performing a soft reset that reloads FireFly's config.

</details>
      <h2 id="performing-the-upgrade">
        
        
          <a href="#performing-the-upgrade" class="anchor-heading" aria-labelledby="performing-the-upgrade"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Performing the Upgrade
        
        
      </h2>
    

<p><strong>Backup current data</strong></p>

<p>Before beginning the upgrade, it is recommended to take a <strong>full backup</strong> of your FireFly database(s).
If you encounter any serious issues after the upgrade, you should revert to the old binary and restore
your database snapshot. While down-migrations are provided to revert a database in place, they are
not guaranteed to work in all scenarios.</p>

<p><strong>Upgrade FireFly and all dependencies</strong></p>

<p>Bring FireFly down and replace it with the new v1.1.0 binary. You should also replace other runtimes (such as blockchain, data exchange, and token connectors) with the supported versions noted in the <a href="https://github.com/hyperledger/firefly/releases/tag/v1.1.0">v1.1.0 release</a>. Once all binaries have been replaced, start them up again.</p>
      <h2 id="after-upgrading">
        
        
          <a href="#after-upgrading" class="anchor-heading" aria-labelledby="after-upgrading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> After Upgrading
        
        
      </h2>
    

<p><strong>Ensure nodes start without errors</strong></p>

<p>Ensure that FireFly starts without errors. There will likely be new deprecation warnings for config that was deprecated in v1.1.0, but these are safe to ignore for the moment. If you face any errors or crashes, please report the logs to the FireFly channel on Discord, and return your nodes to running the previous version of FireFly if necessary.</p>

<p><strong>Re-broadcast organization and node identities</strong></p>

<p>Once all nodes in the multiparty network have been upgraded and are running without errors, each node should re-broadcast its org and node identity by invoking <code class="language-plaintext highlighter-rouge">/network/organizations/self</code> and <code class="language-plaintext highlighter-rouge">/network/nodes/self</code> (or, if your application uses a non-default namespace, by invoking the <code class="language-plaintext highlighter-rouge">/namespace/{ns}</code>-prefixed versions of these APIs).</p>

<p>This will ensure that queries to <code class="language-plaintext highlighter-rouge">/network/organizations</code> and <code class="language-plaintext highlighter-rouge">/network/nodes</code> return the expected results, and will register the identities in a way that can be supported by both V1 and V2 multiparty contracts (see “Upgrading the Multi-Party Contract”).</p>

<p><strong>Update config file to latest format</strong></p>

<p>Once the network is stable, you should update your config file(s) again to remove deprecated
configuration and set yourself up to take advantage of all the new configuration options
available in v1.1.0.</p>

<p>You can utilize the <a href="https://github.com/hyperledger/firefly/tree/main/ffconfig">ffconfig</a> tool to automatically check and fix deprecated config with a command such as:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ffconfig migrate -f &lt;input-file&gt; -o &lt;output-file&gt;
</code></pre></div></div>
      <h2 id="upgrading-the-multi-party-contract">
        
        
          <a href="#upgrading-the-multi-party-contract" class="anchor-heading" aria-labelledby="upgrading-the-multi-party-contract"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Upgrading the Multi-Party Contract
        
        
      </h2>
    

<p>FireFly v1.1.0 includes a new recommended version of the contract used for multi-party systems (for both <a href="https://github.com/hyperledger/firefly/tree/main/smart_contracts/ethereum/solidity_firefly/contracts">Ethereum</a> and <a href="https://github.com/hyperledger/firefly/tree/main/smart_contracts/fabric/firefly-go/chaincode">Fabric</a>). It also introduces a versioning method for this contract, and a path for migrating networks from one contract address to a new one.</p>

<p>After upgrading FireFly itself, it is recommended to upgrade your multi-party system to the
latest contract version by following these steps.</p>

<ol>
  <li>Compile and deploy an instance of the new FireFly contract (linked above) to your blockchain, using <code class="language-plaintext highlighter-rouge">ff deploy</code> or <a href="https://hyperledger.github.io/firefly/tutorials/custom_contracts/ethereum.html#contract-deployment">a similar method</a>.</li>
  <li>Edit the config file on each node in your network, to add the new contract to the multi-party contract list like so:</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>namespaces:
  predefined:
  - name: default
    multiparty:
      enabled: true
      contract:
      - location:
          address: 0x09f107d670b2e69a700a4d9ef1687490ae1568db
      - location:
          address: 0x1bee32b37dc48e99c6b6bf037982eb3bee0e816b
</code></pre></div></div>

<p>This example assumes <code class="language-plaintext highlighter-rouge">0x09f1...</code> represents the address of the original contract, and <code class="language-plaintext highlighter-rouge">0x1bee...</code> represents the new one. Note that if you have multiple namespaces, you must repeat this step for each namespace in the config - and you must <em>deploy a unique contract instance</em> per namespace (in the new network rules, multiple namespaces cannot share a single contract).</p>

<ol>
  <li>After updating each node’s configuration, restart the node and ensure it starts without issues.</li>
  <li>Have any member of the multi-party network invoke the <code class="language-plaintext highlighter-rouge">/namespaces/{ns}/network/action</code> FireFly API with a body of <code class="language-plaintext highlighter-rouge">{"type": "terminate"}</code>. This will terminate the old contract and instruct all members to move simultaneously to the newly configured one.</li>
  <li>Verify success by querying <code class="language-plaintext highlighter-rouge">/namespaces/{ns}/status</code> on each node and checking that the active multi-party contract matches the new address.</li>
</ol>

        

        

        
        

      </div>
    </div>

    
      

      <div class="search-overlay"></div>
    
  </div>
  <script>
    getVersions("en")
  </script>
</body>
</html>
