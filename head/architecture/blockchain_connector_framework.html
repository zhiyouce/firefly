<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  
    <title>Blockchain Connector Toolkit - Hyperledger FireFly Docs</title>

    
  

  <link rel="shortcut icon" href="/firefly/head/favicon.ico" type="image/x-icon">

  <link rel="stylesheet" href="/firefly/head/assets/css/just-the-docs-default.css">

  

  
    <script type="text/javascript" src="/firefly/head/assets/js/vendor/lunr.min.js"></script>
  
  <script type="text/javascript" src="/firefly/head/assets/js/just-the-docs.js"></script>

  <script type="text/javascript" src="/firefly/assets/js/versions.js" data-proofer-ignore></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Blockchain Connector Toolkit | Hyperledger FireFly Docs</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Blockchain Connector Toolkit" />
<meta property="og:locale" content="en" />
<meta name="description" content="Hyperledger FireFly is the first open source Supernode: a complete stack for enterprises to build and scale secure Web3 applications. The FireFly API for digital assets, data flows, and blockchain transactions makes it radically faster to build production-ready apps on popular chains and protocols." />
<meta property="og:description" content="Hyperledger FireFly is the first open source Supernode: a complete stack for enterprises to build and scale secure Web3 applications. The FireFly API for digital assets, data flows, and blockchain transactions makes it radically faster to build production-ready apps on popular chains and protocols." />
<meta property="og:site_name" content="Hyperledger FireFly Docs" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Blockchain Connector Toolkit" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Hyperledger FireFly is the first open source Supernode: a complete stack for enterprises to build and scale secure Web3 applications. The FireFly API for digital assets, data flows, and blockchain transactions makes it radically faster to build production-ready apps on popular chains and protocols.","headline":"Blockchain Connector Toolkit","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/firefly/head/images/hyperledger-firefly_color.svg"}},"url":"/firefly/head/architecture/blockchain_connector_framework.html"}</script>
<!-- End Jekyll SEO tag -->


  

</head>

<body>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="svg-link" viewBox="0 0 24 24">
      <title>Link</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
      </svg>
    </symbol>
    <symbol id="svg-search" viewBox="0 0 24 24">
      <title>Search</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
        <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
    </symbol>
    <symbol id="svg-menu" viewBox="0 0 24 24">
      <title>Menu</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
        <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </symbol>
    <symbol id="svg-arrow-right" viewBox="0 0 24 24">
      <title>Expand</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
        <polyline points="9 18 15 12 9 6"></polyline>
      </svg>
    </symbol>
    <symbol id="svg-doc" viewBox="0 0 24 24">
      <title>Document</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
        <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
      </svg>
    </symbol>
  </svg>

  <div class="side-bar">
    <div class="site-header">
      <a href="/firefly/head/" class="site-title lh-tight">
  <div class="site-logo"></div>

</a>
      <a href="#" id="menu-button" class="site-button">
        <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
      </a>
    </div>
    <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
      
        <ul class="nav-list"><li class="nav-list-item"><a href="/firefly/head/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/overview/" class="nav-list-link">Understanding FireFly</a><ul class="nav-list "><li class="nav-list-item "><a href="/firefly/head/overview/supernode_concept.html" class="nav-list-link">Introduction</a></li><li class="nav-list-item "><a href="/firefly/head/overview/usage_patterns.html" class="nav-list-link">Usage Patterns</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/overview/key_features.html" class="nav-list-link">Key Features</a><ul class="nav-list"><li class="nav-list-item ">
                    <a href="/firefly/head/overview/key_components/apps.html" class="nav-list-link">Apps</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/overview/key_components/digital_assets.html" class="nav-list-link">Digital Assets</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/overview/key_components/connectors.html" class="nav-list-link">Connector Framework</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/overview/key_components/orchestration_engine.html" class="nav-list-link">Orchestration Engine</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/overview/key_components/flows.html" class="nav-list-link">Flows</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/overview/key_components/security.html" class="nav-list-link">Security</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/overview/key_components/tools.html" class="nav-list-link">Tools</a>
                  </li></ul></li><li class="nav-list-item "><a href="/firefly/head/overview/gateway_features.html" class="nav-list-link">Web3 Gateway Features</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/overview/multiparty_features.html" class="nav-list-link">Multiparty Features</a><ul class="nav-list"><li class="nav-list-item ">
                    <a href="/firefly/head/overview/multiparty/multiparty_flow.html" class="nav-list-link">Multiparty Process Flow</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/overview/multiparty/data_exchange.html" class="nav-list-link">Private Data Exchange</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/overview/multiparty/broadcast.html" class="nav-list-link">Broadcast data</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/overview/multiparty/deterministic.html" class="nav-list-link">Deterministic Compute</a>
                  </li></ul></li><li class="nav-list-item "><a href="/firefly/head/overview/public_vs_permissioned.html" class="nav-list-link">Public and Permissioned</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/gettingstarted/" class="nav-list-link">Getting Started</a><ul class="nav-list "><li class="nav-list-item "><a href="/firefly/head/gettingstarted/firefly_cli.html" class="nav-list-link">① Install the FireFly CLI</a></li><li class="nav-list-item "><a href="/firefly/head/gettingstarted/setup_env.html" class="nav-list-link">② Start your environment</a></li><li class="nav-list-item "><a href="/firefly/head/gettingstarted/sandbox.html" class="nav-list-link">③ Use the Sandbox</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/tutorials/" class="nav-list-link">Tutorials</a><ul class="nav-list "><li class="nav-list-item "><a href="/firefly/head/tutorials/broadcast_data.html" class="nav-list-link">Broadcast data</a></li><li class="nav-list-item "><a href="/firefly/head/tutorials/private_send.html" class="nav-list-link">Privately send data</a></li><li class="nav-list-item "><a href="/firefly/head/tutorials/define_datatype.html" class="nav-list-link">Define a datatype</a></li><li class="nav-list-item "><a href="/firefly/head/tutorials/events.html" class="nav-list-link">Listen for events</a></li><li class="nav-list-item "><a href="/firefly/head/tutorials/query_messages.html" class="nav-list-link">Explore messages</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/tutorials/tokens/" class="nav-list-link">Use tokens</a><ul class="nav-list"><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/tokens/erc20.html" class="nav-list-link">ERC-20</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/tokens/erc721.html" class="nav-list-link">ERC-721</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/tokens/erc1155.html" class="nav-list-link">ERC-1155</a>
                  </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/tutorials/custom_contracts/" class="nav-list-link">Work with custom smart contracts</a><ul class="nav-list"><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/custom_contracts/ethereum.html" class="nav-list-link">Ethereum</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/custom_contracts/fabric.html" class="nav-list-link">Fabric</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/custom_contracts/pinning.html" class="nav-list-link">Pinning Data</a>
                  </li></ul></li><li class="nav-list-item "><a href="/firefly/head/tutorials/create_custom_identity.html" class="nav-list-link">Create a custom identity</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/tutorials/chains/" class="nav-list-link">Connect to remote blockchains</a><ul class="nav-list"><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/chains/polygon_testnet.html" class="nav-list-link">Polygon Testnet</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/chains/binance_smart_chain.html" class="nav-list-link">Binance Smartchain Testnet</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/chains/avalanche.html" class="nav-list-link">Avalanche Testnet</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/chains/arbitrum.html" class="nav-list-link">Arbitrum Testnet</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/chains/optimism.html" class="nav-list-link">Optimism Testnet</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/chains/fabric_test_network.html" class="nav-list-link">Fabric-Samples Test Network</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/chains/moonbeam.html" class="nav-list-link">Moonbeam Testnet</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/tutorials/chains/zksync_testnet.html" class="nav-list-link">zkSync Testnet</a>
                  </li></ul></li><li class="nav-list-item "><a href="/firefly/head/tutorials/basic_auth.html" class="nav-list-link">Enable basic auth</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/reference/" class="nav-list-link">Reference</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/reference/types/" class="nav-list-link">Core Resources</a><ul class="nav-list"><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/simpletypes.html" class="nav-list-link">Simple Types</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/event.html" class="nav-list-link">Event</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/subscription.html" class="nav-list-link">Subscription</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/contractapi.html" class="nav-list-link">ContractAPI</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/blockchainevent.html" class="nav-list-link">BlockchainEvent</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/transaction.html" class="nav-list-link">Transaction</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/operation.html" class="nav-list-link">Operation</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/operationwithdetail.html" class="nav-list-link">OperationWithDetail</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/ffi.html" class="nav-list-link">FFI</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/contractlistener.html" class="nav-list-link">ContractListener</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/tokenpool.html" class="nav-list-link">TokenPool</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/tokentransfer.html" class="nav-list-link">TokenTransfer</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/tokenapproval.html" class="nav-list-link">TokenApproval</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/identity.html" class="nav-list-link">Identity</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/verifier.html" class="nav-list-link">Verifier</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/message.html" class="nav-list-link">Message</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/data.html" class="nav-list-link">Data</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/datatype.html" class="nav-list-link">Datatype</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/group.html" class="nav-list-link">Group</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/nextpin.html" class="nav-list-link">NextPin</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/batch.html" class="nav-list-link">Batch</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/namespace.html" class="nav-list-link">Namespace</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/wsstart.html" class="nav-list-link">WSStart</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/wsack.html" class="nav-list-link">WSAck</a>
                  </li><li class="nav-list-item ">
                    <a href="/firefly/head/reference/types/wserror.html" class="nav-list-link">WSError</a>
                  </li></ul></li><li class="nav-list-item "><a href="/firefly/head/reference/config.html" class="nav-list-link">Configuration Reference</a></li><li class="nav-list-item "><a href="/firefly/head/reference/api_query_syntax.html" class="nav-list-link">API Query Syntax</a></li><li class="nav-list-item "><a href="/firefly/head/reference/api_post_syntax.html" class="nav-list-link">API Post Syntax</a></li><li class="nav-list-item "><a href="/firefly/head/reference/blockchain_operation_status.html" class="nav-list-link">Blockchain Operation Status</a></li><li class="nav-list-item "><a href="/firefly/head/reference/events.html" class="nav-list-link">Event Bus</a></li><li class="nav-list-item "><a href="/firefly/head/reference/identities.html" class="nav-list-link">Identities</a></li><li class="nav-list-item "><a href="/firefly/head/reference/firefly_interface_format.html" class="nav-list-link">FireFly Interface Format</a></li><li class="nav-list-item "><a href="/firefly/head/reference/namespaces.html" class="nav-list-link">Namespaces</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/reference/microservices/" class="nav-list-link">Microservices</a><ul class="nav-list"><li class="nav-list-item ">
                    <a href="/firefly/head/reference/microservices/fftokens.html" class="nav-list-link">fftokens</a>
                  </li></ul></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/architecture/" class="nav-list-link">Architecture</a><ul class="nav-list "><li class="nav-list-item "><a href="/firefly/head/architecture/node_component_architecture.html" class="nav-list-link">Node Component Architecture</a></li><li class="nav-list-item  active"><a href="/firefly/head/architecture/blockchain_connector_framework.html" class="nav-list-link active">Blockchain Connector Toolkit</a></li><li class="nav-list-item "><a href="/firefly/head/architecture/multiparty_event_sequencing.html" class="nav-list-link">Multiparty Event Sequencing</a></li><li class="nav-list-item "><a href="/firefly/head/architecture/plugin_architecture.html" class="nav-list-link">Plugin Architecture</a></li><li class="nav-list-item "><a href="/firefly/head/architecture/ping_pong_txflow.html" class="nav-list-link">Example Transaction Flow</a></li><li class="nav-list-item "><a href="/firefly/head/architecture/internal_event_sequencing.html" class="nav-list-link">Internal Event Sequencing</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/contributors/" class="nav-list-link">Contributors</a><ul class="nav-list "><li class="nav-list-item "><a href="/firefly/head/contributors/code_overview.html" class="nav-list-link">FireFly Code Overview</a></li><li class="nav-list-item "><a href="/firefly/head/contributors/code_hierarchy.html" class="nav-list-link">FireFly Code Hierarchy</a></li><li class="nav-list-item "><a href="/firefly/head/contributors/code_repositories.html" class="nav-list-link">Code Repositories</a></li><li class="nav-list-item "><a href="/firefly/head/contributors/dev_environment_setup.html" class="nav-list-link">Setting up a FireFly Core Development Environment</a></li><li class="nav-list-item "><a href="/firefly/head/contributors/advanced_cli_usage.html" class="nav-list-link">Advanced CLI Usage</a></li><li class="nav-list-item "><a href="/firefly/head/contributors/docs_setup.html" class="nav-list-link">Contributing to Documentation</a></li><li class="nav-list-item "><a href="/firefly/head/contributors/version_scheme.html" class="nav-list-link">Versioning Scheme</a></li><li class="nav-list-item "><a href="/firefly/head/contributors/release_guide.html" class="nav-list-link">Release Guide</a></li></ul></li><li class="nav-list-item"><a href="/firefly/head/swagger/swagger.html" class="nav-list-link">API Spec</a></li><li class="nav-list-item"><a href="/firefly/head/faqs/" class="nav-list-link">FAQs</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/firefly/head/releasenotes/" class="nav-list-link">Release Notes</a><ul class="nav-list "><li class="nav-list-item "><a href="/firefly/head/releasenotes/1.2_migration_guide.html" class="nav-list-link">v1.2.0 Migration Guide</a></li><li class="nav-list-item "><a href="/firefly/head/releasenotes/1.1_migration_guide.html" class="nav-list-link">v1.1.0 Migration Guide</a></li></ul></li></ul>

      
    </nav>
    <footer class="site-footer">
      This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.
    </footer>
  </div>
  <div class="main" id="top">
    <div id="main-header" class="main-header">
      
        <div class="search">
          <div class="search-input-wrap">
            <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Hyperledger FireFly Docs" aria-label="Search Hyperledger FireFly Docs" autocomplete="off">
            <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
          </div>
          <div id="search-results" class="search-results"></div>
        </div>
      
      
      
        <nav aria-label="Auxiliary" class="aux-nav">
          <ul class="aux-nav-list">
            
              <li class="aux-nav-list-item">
                <a href="https://github.com/hyperledger/firefly" class="site-button"
                  
                >
                  GitHub
                </a>
              </li>
            
              <li class="aux-nav-list-item">
                <a href="https://wiki.hyperledger.org/display/FIR" class="site-button"
                  
                >
                  Wiki
                </a>
              </li>
            
              <li class="aux-nav-list-item">
                <a href="https://discord.gg/hyperledger" class="site-button"
                  
                >
                  Discord
                </a>
              </li>
            
            <li class="aux-nav-list-item">
              <span class="dropdown">
                <a class="site-button">English
                </a>
                <div class="dropdown-content"></div>
              </span>
            </li>
            <li class="aux-nav-list-item">
              <span class="dropdown">
                <a class="site-button">
                  Version: head
                </a>
                <div class="dropdown-content" id="versionDropdown">
                </div>
              </span>
            </li>
          </ul>
        </nav>
      
    </div>
    <div id="main-content-wrap" class="main-content-wrap">
      
        <nav aria-label="Breadcrumb" class="breadcrumb-nav">
            <ol class="breadcrumb-nav-list">
              
              
              
                <li class="breadcrumb-nav-list-item"><a href="/firefly/head/architecture/">Architecture</a></li>
              
              <li class="breadcrumb-nav-list-item"><span>Blockchain Connector Toolkit</span></li>
            </ol>
          </nav>
        
      
      <div id="main-content" class="main-content" role="main">
        
          <h1 class="no_toc" id="multiparty-event-sequencing">
        
        
          <a href="#multiparty-event-sequencing" class="anchor-heading" aria-labelledby="multiparty-event-sequencing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Multiparty Event Sequencing
        
        
      </h1>
    
      <h2 class="no_toc text-delta" id="table-of-contents">
        
        
          <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents
        
        
      </h2>
    

<ol id="markdown-toc">
  <li><a href="#blockchain-connector-framework" id="markdown-toc-blockchain-connector-framework">Blockchain Connector Framework</a></li>
  <li><a href="#connector-toolkit-architecture" id="markdown-toc-connector-toolkit-architecture">Connector Toolkit Architecture</a></li>
  <li><a href="#assumptions--requirements" id="markdown-toc-assumptions--requirements">Assumptions / Requirements</a></li>
  <li><a href="#nonce-management" id="markdown-toc-nonce-management">Nonce management</a>    <ol>
      <li><a href="#avoid-multiple-nonce-management-systems-against-the-same-signing-key" id="markdown-toc-avoid-multiple-nonce-management-systems-against-the-same-signing-key">Avoid multiple nonce management systems against the same signing key</a></li>
      <li><a href="#why-at-source-nonce-management-was-chosen-vs-at-target" id="markdown-toc-why-at-source-nonce-management-was-chosen-vs-at-target">Why “at source” nonce management was chosen vs. “at target”</a></li>
    </ol>
  </li>
  <li><a href="#policy-manager" id="markdown-toc-policy-manager">Policy Manager</a></li>
  <li><a href="#event-streams" id="markdown-toc-event-streams">Event Streams</a></li>
</ol><hr />

<iframe width="736" height="414" src="https://www.youtube.com/embed/Bwx7MWjP1z0?start=259" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
      <h2 id="blockchain-connector-framework">
        
        
          <a href="#blockchain-connector-framework" class="anchor-heading" aria-labelledby="blockchain-connector-framework"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Blockchain Connector Framework
        
        
      </h2>
    

<p>Hyperledger FireFly has a <a href="/firefly/head/overview/key_components/connectors.html">multi-tier pluggable architecture</a> for supporting blockchains of
all shapes and sizes. This includes a remote API that allows a microservice connector to
be built from scratch in any programming language.</p>

<p>It also includes the <strong>Connector Toolkit</strong>, which is a pluggable SDK in Golang that provides
a set of re-usable modules that can be used across blockchain implementations.</p>

<blockquote>
  <p>This is the preferred way to build a new blockchain connector, if you are comfortable
with coding in Golang and there are language bindings available for the raw RPC interface
of your blockchain.</p>
</blockquote>
      <h2 id="connector-toolkit-architecture">
        
        
          <a href="#connector-toolkit-architecture" class="anchor-heading" aria-labelledby="connector-toolkit-architecture"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Connector Toolkit Architecture
        
        
      </h2>
    

<p><a href="../images/firefly_transaction_manager.jpg"><img src="/firefly/head/images/firefly_transaction_manager.jpg" alt="FireFly Blockchain Connector Toolkit Architecture" /></a></p>

<p>The core component of the FireFly Connector Framework for Blockchains is a Go module
called <a href="https://github.com/hyperledger/firefly-transaction-manager">FireFly Transaction Manager</a> (FFTM).</p>

<p>FFTM is responsible for:</p>

<ul>
  <li>Submission of transactions to blockchains of all types
    <ul>
      <li>Nonce management - idempotent submission of transactions, and assignment of nonces</li>
      <li>Protocol connectivity decoupled with additional lightweight API connector</li>
      <li>Easy to add additional protocols that conform to normal patterns of TX submission / events</li>
    </ul>
  </li>
  <li>Monitoring and updating blockchain operations
    <ul>
      <li>Receipts</li>
      <li>Confirmations</li>
    </ul>
  </li>
  <li>Gas calculation and rescue of stalled transactions
    <ul>
      <li>Extensible policy engine</li>
      <li>Gas station API integration</li>
    </ul>
  </li>
  <li>Event streaming
    <ul>
      <li>Protocol agnostic event polling/streaming support</li>
      <li>Reliable checkpoint restart</li>
      <li>At least once delivery API</li>
    </ul>
  </li>
</ul>
      <h2 id="assumptions--requirements">
        
        
          <a href="#assumptions--requirements" class="anchor-heading" aria-labelledby="assumptions--requirements"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Assumptions / Requirements
        
        
      </h2>
    

<p>The framework is currently constrained to blockchains that adhere to certain basic principals:</p>

<ol>
  <li>Has transactions
    <ul>
      <li>That are signed</li>
      <li>That can optionally have gas semantics (limits and prices, expressed in a blockchain specific way)</li>
    </ul>
  </li>
  <li>Has events (or “logs”)
    <ul>
      <li>That are emitted as a deterministic outcome of transactions</li>
    </ul>
  </li>
  <li>Has blocks
    <ul>
      <li>Containing zero or more transactions, with their associated events</li>
      <li>With a sequential numeric order</li>
      <li>With a hash</li>
      <li>With a parent hash</li>
    </ul>
  </li>
  <li>Has finality for transactions &amp; events that can be expressed as a level of confidence over time
    <ul>
      <li>Confirmations: A number of sequential blocks in the canonical chain that contain the transaction</li>
    </ul>
  </li>
</ol>
      <h2 id="nonce-management">
        
        
          <a href="#nonce-management" class="anchor-heading" aria-labelledby="nonce-management"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Nonce management
        
        
      </h2>
    

<p>The nonces for transactions is assigned as early as possible in the flow:</p>
<ul>
  <li>Before the REST API for submission of the transaction occurs</li>
  <li>After the FFCAPI blockchain connector verifies the transaction can be encoded successfully to the chain</li>
  <li>With protection against multiple parallel API requests for the same signing address</li>
  <li>With stateful persistence meaning the connector knows about all nonces it previously allocated, to avoids duplicates</li>
</ul>

<p>This “at source” allocation of nonces provides the strictest assurance of order of transactions possible,
because the order is locked in with the coordination of the business logic of the application submitting the transaction.</p>

<p>As well as protecting against loss of transactions, this protects against duplication of transactions - even in crash
recovery scenarios with a sufficiently reliable persistence layer.</p>
      <h3 id="avoid-multiple-nonce-management-systems-against-the-same-signing-key">
        
        
          <a href="#avoid-multiple-nonce-management-systems-against-the-same-signing-key" class="anchor-heading" aria-labelledby="avoid-multiple-nonce-management-systems-against-the-same-signing-key"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Avoid multiple nonce management systems against the same signing key
        
        
      </h3>
    

<p>FFTM is optimized for cases where all transactions for a given signing address flow through the
same FireFly connector. If you have signing and nonce allocation happening elsewhere, not going through the
FireFly blockchain connector, then it is possible that the same nonce will be allocated in two places.</p>

<blockquote>
  <p>Be careful that the signing keys for transactions you stream through the Nonce Management of the FireFly
blockchain connector are not used elsewhere.</p>
</blockquote>

<p>If you must have multiple systems performing nonce management against the same keys you use with FireFly nonce management,
you can set the <code class="language-plaintext highlighter-rouge">transactions.nonceStateTimeout</code> to <code class="language-plaintext highlighter-rouge">0</code> (or a low threshold like <code class="language-plaintext highlighter-rouge">100ms</code>) to cause the nonce management
to query the pending transaction pool of the node every time a nonce is allocated.</p>

<p>This reduces the window for concurrent nonce allocation to be small (basically the same as if you had
multiple simple web/mobile wallets used against the same key), but it does not eliminate it completely it.</p>
      <h3 id="why-at-source-nonce-management-was-chosen-vs-at-target">
        
        
          <a href="#why-at-source-nonce-management-was-chosen-vs-at-target" class="anchor-heading" aria-labelledby="why-at-source-nonce-management-was-chosen-vs-at-target"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Why “at source” nonce management was chosen vs. “at target”
        
        
      </h3>
    

<p>The “at source” approach to ordering used in FFTM could be compared with the “at target” allocation of nonces used in
<a href="https://github.com/hyperledger/firefly-ethconnect">EthConnect</a>).</p>

<p>The “at target” approach optimizes for throughput and ability to send new transactions to the chain,
with an at-least-once delivery assurance to the applications.</p>

<p>An “at target” algorithm as used in EthConnect could resume transaction delivery automatically without operator intervention
from almost all scenarios, including where nonces have been double allocated.</p>

<p>However, “at target” comes with two compromises that mean FFTM chose the “at source” approach was chosen for FFTM:</p>

<ul>
  <li>
    <p>Individual transactions might fail in certain scenarios, and subsequent transactions will still be streamed to the chain.
While desirable for automation and throughput, this reduces the ordering guarantee for high value transactions.</p>
  </li>
  <li>
    <p>In crash recovery scenarios the assurance is at-least-once delivery for “at target” ordering (rather than “exactly once”),
although the window can be made very small through various optimizations included in the EthConnect codebase.</p>
  </li>
</ul>
      <h2 id="policy-manager">
        
        
          <a href="#policy-manager" class="anchor-heading" aria-labelledby="policy-manager"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Policy Manager
        
        
      </h2>
    

<p>The policy manager is a pluggable component that allows rich policy to be applied to the
gas pricing, signing, submission and re-submission of transactions to the blockchain.</p>

<p>It is executed at regular intervals against transactions in-flight, and is responsible for
evaluating what actions are required to cause those transactions to be executed successfully.</p>

<p>The policy manager can store custom state in the state store of the FFTM code, which is also
reported in status within the FireFly API/Explorer on the operation.</p>

<p>A reference implementation is provided that:</p>
<ul>
  <li>Submits transactions via the underlying FFCAPI</li>
  <li>Estimates gas price in one of three modes:
    <ul>
      <li>Fixed: It is specified via configuration</li>
      <li>Connector: The FFCAPI is used to estimate the gas price (e.g. <code class="language-plaintext highlighter-rouge">eth_gasPrice</code> for EVM JSON/RPC)</li>
      <li>Gas Oracle: A REST API is called the the result mapped via a Go template</li>
    </ul>
  </li>
  <li>Re-submits transactions after a configurable stale time</li>
</ul>

<p>The reference implementation is available <a href="https://github.com/hyperledger/firefly-transaction-manager/blob/main/pkg/policyengines/simple/simple_policy_engine.go">here</a></p>

<p>FireFly 1.2 introduced a specification for policy engines to record more detailed information about transaction sub-status and lower-level actions it performs
as part of progressing a transaction onto the chain. A policy engine might for example have a sub-status of <code class="language-plaintext highlighter-rouge">Received</code> and another sub-status of <code class="language-plaintext highlighter-rouge">Tracking</code>. For more information see <a href="../reference/blockchain_operation_status.html">Blockchain Operation Status</a></p>
      <h2 id="event-streams">
        
        
          <a href="#event-streams" class="anchor-heading" aria-labelledby="event-streams"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Event Streams
        
        
      </h2>
    

<p>One of the largest pieces of heavy lifting code in the FFTM codebase, is the event stream
support. This provides a WebSocket (and Webhook) interface that FireFly Core and the Tokens
Connectors connect to in order to receive ordered streams of events from the blockchain.</p>

<p>The interface down to the blockchain layer is via go channels, and there are lifecycle
interactions over the FFCAPI to the blockchain specific code to add and remove listeners
for different types of blockchain events.</p>

<p>Some high architectural principals that informed the code:</p>

<ul>
  <li>Event Stream
    <ul>
      <li>A delivery stream of events that have been confirmed</li>
      <li>Only events that have reached finality are delivered to an event stream</li>
      <li>FireFly creates a single event stream <em>per namespace</em> from core</li>
      <li>Each token connector creates a single event stream</li>
      <li>If one event stream is blocked, it must not block other streams in the FFTM based runtime</li>
    </ul>
  </li>
  <li>Listener (/Subscription)
    <ul>
      <li>A blockchain specific specification for a set of events to listen to</li>
      <li>Specifies an initial block to listen from, and will replay all events from that block</li>
      <li>Can have multiple blockchain specific filters, to match multiple events</li>
      <li>The order of delivery <em>within</em> a listener matches the blockchain across all filters
        <blockquote>
          <ul>
            <li>Note that the EVMConnect implementation of FFCAPI attempts to make this true across all listeners
on an event stream. However, this is impossible when a new listener has been added,
and that listener is catching up from an old block.</li>
          </ul>
        </blockquote>
      </li>
    </ul>
  </li>
  <li>Compatibility
    <ul>
      <li>Has breaking changes from the API of EthConnect</li>
      <li>A component that has been upgraded to support EVMConnect,
can maintain backwards compatibility with EthConnect</li>
    </ul>
  </li>
  <li>Batching &amp; Checkpoints
    <ul>
      <li>Delivery on event streams is via batches, with a single confirmation for each batch</li>
      <li>At-least-once delivery of batches</li>
      <li>Checkpoints are written after each batch</li>
    </ul>
  </li>
  <li>Chain head stability
    <ul>
      <li>A configurable section of the head of the chain is considered unstable</li>
      <li>If no events have been delivered for a listener, checkpoints are still moved forwards</li>
      <li>These empty checkpoints will never be written in the unstable head of the chain</li>
    </ul>
  </li>
  <li>Confirmation manager
    <ul>
      <li>Plugged in between detection of the events, and assembling into batches</li>
      <li>Determines the final order based on order of confirmation on the blockchain</li>
    </ul>
  </li>
</ul>

<p><a href="../images/firefly_connector_toolkit_event_streams.jpg"><img src="/firefly/head/images/firefly_connector_toolkit_event_streams.jpg" alt="FireFly Connector Toolkit Event Streams" /></a></p>

        

        

        
        

      </div>
    </div>

    
      

      <div class="search-overlay"></div>
    
  </div>
  <script>
    getVersions("en")
  </script>
</body>
</html>
